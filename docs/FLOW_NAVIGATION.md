# ูุธุงู ุชูููุฏ ุงูุฃุฒุฑุงุฑ ูุงูุชูููู (FLOW_NAVIGATION)

ูุฐุง ุงููุณุชูุฏ ูุดุฑุญ ููููุฉ ุนูู ุดุฌุฑุฉ ุงูุชูููู ูู ุงูุจูุช ุจุฏุกูุง ูู ุชุฎุฒูู ุงููุณุงุฑุ ูุฑูุฑูุง ุจุจูุงุก ุงูููุงุฆู ูุงูููุงุชุฑุ ูุญุชู ุงูุชุฑุญูู ุจูู ุงูุตูุญุงุช.

## ุชุฎุฒูู ุงููุณุงุฑ ุจู `NavStack`
- ูุชู ุญูุธ ุงููุณุงุฑ ููู ูุณุชุฎุฏู ุฏุงุฎู `context.user_data["nav_stack"]` ุนูู ููุฆุฉ ููุฏุณ ูู ุงูุนูุงุตุฑ.
- ุงูุนูุตุฑ ููุซู ุนูุฏุฉ ุจุงูุดูู `(kind, id, title)`:
  - `kind`: ููุน ุงูุนูุฏุฉ (ูุซู `level` ุฃู `subject`).
  - `id`: ุงููุนุฑู ุงููุฑุชุจุท ุจุงูุนูุฏุฉ ููููู ุฃู ูููู ุนุฏุฏูุง ุฃู ุณูุณูุฉ ุฃู ูุฌููุนุฉ ูุนุฑูุงุช.
  - `title`: ุงูุชุณููุฉ ุงููุนุฑูุถุฉ ูููุณุชุฎุฏู.
- ูููุฑ `NavStack` ุนูููุงุช ุงูุฏูุน (`push`) ูุงูุณุญุจ (`pop`) ูุงุณุชุฑุฌุงุน ุงููุต ุงููุงูู ูููุณุงุฑ (`path_text`)ใF:bot/navigation/nav_stack.pyโL5-L52ใ.

## ุฃููุงุน ุงูุนูุฏ ููุณุงุฑ ุงูุชูููู
ุงูุชูููู ูุณูุฑ ููู ุฃููุงุน ุงูุนูุฏ ุงูุชุงููุฉ ุจุงูุชุณูุณู:

```
root โ level โ term โ term_option โ subject โ section โ section_option โ
year โ year_option โ lecturer โ lecture โ lecture_type
```

ูุญุฏุฏ ุงููุงููุณ `CHILD_KIND` ููุน ุงูุฃุจูุงุก ููู ุนูุฏุฉุ ููุง ูุณูุญ ุจุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูุจูุงุก ุงููุณุงุฑ ุงูุตุญูุญใF:bot/navigation/tree.pyโL185-L197ใ.

## ุชุญููู ุงูุฃุจูุงุก ูุงููุงุด ูุตูุฑ ุงูุนูุฑ
- ูุชู ุชุญููู ุนูุงุตุฑ ุงููุงุฆูุฉ lazily ุนู ุทุฑูู ุงูุฏุงูุฉ `_load_children`.
- ูุชุญุณูู ุงูุฃุฏุงุก ูุชู ุชุฎุฒูู ุขุฎุฑ ูุชูุฌุฉ ูู `context.user_data["last_children"]` ูุน ุฎุชู ุฒููู.
- ุฅุฐุง ุชู ุทูุจ ููุณ ุงูุนูุฏุฉ ุฎูุงู `CACHE_TTL_SECONDS` (90 ุซุงููุฉ)ุ ุชูุนุงุฏ ุงููุชูุฌุฉ ูู ุงููุงุด ุจุฏูุงู ูู ุฅุนุงุฏุฉ ุงูุงุณุชุนูุงู ุนู ูุงุนุฏุฉ ุงูุจูุงูุงุชใF:bot/handlers/navigation_tree.pyโL69-L172ใ.

## ุชุฑุฌูุฉ ุงูุชุณููุงุช
ูุชู ุชุญููู ุงูุฑููุฒ ุงูุฏุงุฎููุฉ ุฅูู ุชุณููุงุช ุนุฑุจูุฉ ูุน ุฑููุฒ ุชุนุจูุฑูุฉ ูุจู ุนุฑุถูุง:
- **ุฃูุณุงู ุงููุงุฏุฉ** `SECTION_LABELS` (ูุซู "ูุธุฑู ๐" ุฃู "ุนููู ๐ฌ")ใF:bot/handlers/navigation_tree.pyโL43-L49ใ.
- **ุงูุจุทุงูุงุช** `CARD_LABELS` (ูุซู "ุงูุชูุตูู ๐" ุฃู "ูุฑุงุฌุน ๐")ใF:bot/handlers/navigation_tree.pyโL51-L59ใ.
- **ุฃููุงุน ูุญุชูู ุงููุญุงุถุฑุฉ** `LECTURE_TYPE_LABELS` (ูุซู "ุงูุณูุงูุฏุงุช ๐" ุฃู "ุงูููุฏูู ๐ฅ")ใF:bot/db/materials.pyโL6-L16ใ.

## ุชูุณูู ุงูุตูุญุงุช
- ูุชู ุชุญุฏูุฏ ุนุฏุฏ ุงูุนูุงุตุฑ ูู ูู ุตูุญุฉ ุนุจุฑ ุงููุชุบูุฑ `PER_PAGE` ูู ุงูุฅุนุฏุงุฏุงุช (ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ 8)ใF:bot/config/config.pyโL24-L76ใ.
- ุนูุฏ ุจูุงุก ููุญุฉ ุงูุฃุฒุฑุงุฑ ูุณุชุนูู `build_children_keyboard` ูุฐุง ุงูุนุฏุฏ ููุถูู ุฃุฒุฑุงุฑ "โ" ู"โถ" ููุชูููู ุจูู ุงูุตูุญุงุช ูุน ุฒุฑ "๐" ููุฑุฌูุนใF:bot/keyboards/builders/paginated.pyโL11-L76ใ.

## ูุซุงู ุฑุญูุฉ ูุงููุฉ
ุงููููุฐุฌ ุงูุชุงูู ููุถูุญ ุฑุญูุฉ ูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ ูุตูููุง ุฅูู ูุญุชูู ูุญุงุถุฑุฉุ ูุน ุฃุซุฑ ูู ุฎุทูุฉ ุนูู ุงูููุฏุณ:

```
[ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ]
โโ ๐ ุงููุณุชููุงุช
```
1. **ุถุบุท "ุงููุณุชูู ุงูุฃูู"**
   - ุงูููุฏุณ โ `[('level', 1, 'ุงููุณุชูู ุงูุฃูู')]`
2. **ุงุฎุชูุงุฑ "ุงูุชุฑู ุงูุฃูู"**
   - ุงูููุฏุณ โ `[('level', 1, 'ุงููุณุชูู ุงูุฃูู'), ('term', (1, 1), 'ุงูุชุฑู ุงูุฃูู')]`
3. **ูุชุญ "ูุงุฏุฉ ุงูุฑูุงุถูุงุช"**
   - ุงูููุฏุณ โ `[... , ('subject', 5, 'ุงูุฑูุงุถูุงุช')]`
4. **ุงูุฏุฎูู ุฅูู ูุณู "ูุธุฑู"**
   - ุงูููุฏุณ โ `[... , ('section', (5, 'theory'), 'ูุธุฑู ๐')]`
5. **ููุชุฑุฉ ุญุณุจ ุงูุณูุฉ ุซู ุงุฎุชูุงุฑ "1446"**
   - ุงูููุฏุณ โ `[... , ('year', (5, 'theory', 1446), '1446')]`
6. **ุงุฎุชูุงุฑ ุงููุญุงุถุฑ "ุฏ. ุฃุญูุฏ"**
   - ุงูููุฏุณ โ `[... , ('lecturer', (5, 'theory', 1446, 3), 'ุฏ. ุฃุญูุฏ')]`
7. **ูุชุญ "ูุญุงุถุฑุฉ 1"**
   - ุงูููุฏุณ โ `[... , ('lecture', 1, 'ูุญุงุถุฑุฉ 1')]`
8. **ุงุฎุชูุงุฑ ููุน ุงููุญุชูู "ุงูุณูุงูุฏุงุช"**
   - ูุชู ุฅุฑุณุงู ุงููุงุฏุฉ ูููุณุชุฎุฏู ูุชุจูู ุงูุนูุฏุฉ ูู ุงูุฃุนูู ูุงุณุชุฎุฏุงู ุฒุฑ ุงูุฑุฌูุน.

ูู ูุฑุฉ ูุถุบุท ุงููุณุชุฎุฏู ุฒุฑูุง ุฌุฏูุฏูุง ูุชู ุฏูุน ุนูุฏุฉ ุฌุฏูุฏุฉ ุฅูู ุงูููุฏุณุ ูุฒุฑ "๐" ูุณุญุจ ุขุฎุฑ ุนูุฏุฉ ููุนูุฏู ูููุณุชูู ุงูุณุงุจู.
```
[ุจุนุฏ ุงููุตูู]
ุงููุณุงุฑ: ุงููุณุชูู ุงูุฃูู / ุงูุชุฑู ุงูุฃูู / ุงูุฑูุงุถูุงุช / ูุธุฑู ๐ / 1446 / ุฏ. ุฃุญูุฏ / ูุญุงุถุฑุฉ 1
```

ุจูุฐุง ูููู ุงููุณุชุฎุฏู ูุฏ ุชูููู ูู ุงููุณุชูู ุงูุฃุนูู ุญุชู ูุงุฏุฉ ูุญุงุถุฑุฉ ูุญุฏุฏุฉ ูุน ุฅููุงููุฉ ุงูุฑุฌูุน ุฎุทูุฉ ุจุฎุทูุฉ ุฃู ุงูุนูุฏุฉ ูุจุงุดุฑุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ ุนูุฏ ุชูุฑูุบ ุงูููุฏุณ.

