# دليل إعدادات البيئة (.env)

يوضّح هذا المستند جميع المتغيرات البيئية التي يقرأها البوت من ملف `.env` وما تأثير كلٍ منها. يسمح لك هذا الدليل بتجهيز بيئة تشغيل كاملة وتشغيل البوت من الصفر.

ملف البيئة يُحمَّل من المسار الافتراضي `./.env` (قيمة الثابت `ENV_FILE`). يمكن تعديل المسار عند الحاجة، لكن معظم المستخدمين سيكتفون بالمسار الافتراضي.

## المتغيرات المتاحة

| المتغير | مطلوب؟ | القيمة الافتراضية | التأثير والاستخدام | عند الغياب |
|---------|--------|-------------------|---------------------|------------|
| `BOT_TOKEN` | نعم | لا يوجد | رمز الوصول الخاص بتلغرام لتشغيل البوت. | يرفع `RuntimeError` ويمنع الإقلاع. |
| `ARCHIVE_CHANNEL_ID` | نعم (عدد صحيح) | لا يوجد | معرّف قناة الأرشيف التي تُرسل إليها المواد. | يرفع `RuntimeError`. |
| `OWNER_TG_ID` | نعم (عدد صحيح) | لا يوجد | معرّف مالك البوت؛ يُمنح صلاحيات كاملة ويُستخدم في تهيئة قاعدة البيانات. | يرفع `RuntimeError`. |
| `GROUP_ID` | لا (عدد صحيح) | `None` | معرّف مجموعة إدارية/خاصة لسيناريوهات محددة. | تُترك القيمة `None` ولا تُستخدم الميزات المرتبطة بها. |
| `ADMIN_USER_IDS` | لا (قائمة أرقام مفصولة بفواصل) | قائمة فارغة | معرفات مستخدمين إضافيين بصلاحيات إدارية. | لن يكون هناك مشرفون إضافيون؛ يبقى المالك فقط. |
| `COMMIT_SHA` | لا | `"dev"` | رقم الإصدار/الـ commit لعرضه في الرسائل. | يظهر الإصدار كـ `"dev"`. |
| `PER_PAGE` | لا (عدد صحيح) | `8` | عدد العناصر المعروضة في كل صفحة نتائج. | يُستخدم العدد `8`. |
| `NAV_TREE_ENABLED` | لا (قيمة منطقية) | `false` | تفعيل واجهة "شجرة التنقل" في البوت. القيم المقبولة للتفعيل: `1`, `true`, `yes`, `on` (حسّاسة لحالة الأحرف). | تبقى شجرة التنقل معطّلة. |
| `NAV_TREE_SHADOW` | لا (قيمة منطقية) | `false` | تفعيل وضع الظل لشجرة التنقل. نفس قيم التفعيل السابقة. | يبقى وضع الظل غير مفعل. |

> **ملاحظة حول القيم المنطقية**: أي قيمة غير صالحة أو غياب المتغير تُفسَّر كـ `false`.

## أمثلة ملف `.env`

### الحد الأدنى لتشغيل البوت

```dotenv
BOT_TOKEN=123456:ABCDEF-fake-token
ARCHIVE_CHANNEL_ID=-1009876543210
OWNER_TG_ID=123456789
```

### مثال كامل مع كل المتغيرات

```dotenv
# البيانات الأساسية
BOT_TOKEN=123456:ABCDEF-fake-token
ARCHIVE_CHANNEL_ID=-1009876543210
OWNER_TG_ID=123456789

# خيارات إضافية
GROUP_ID=-1001122334455
ADMIN_USER_IDS=111111111,222222222,333333333
COMMIT_SHA=deadbeef
PER_PAGE=10
NAV_TREE_ENABLED=true
NAV_TREE_SHADOW=yes
```

## خطوات التشغيل السريعة

1. أنشئ ملف `.env` في جذر المشروع حسب الأمثلة أعلاه.
2. ثبّت الاعتمادات:
   ```bash
   pip install -r requirements.txt
   ```
3. شغّل البوت:
   ```bash
   python -m bot.main
   ```

عند غياب أي متغير إجباري سيظهر استثناء واضح عند الإقلاع يبيّن اسم المتغير المفقود.

