# ุงุณุชุฎุฏุงู ุดุฌุฑุฉ ุงูุชููู

## ููุญุฉ ุนุงูุฉ
- ุชุนุชูุฏ ุงูุดุฌุฑุฉ ุนูู ููุฏุณู ูุญูุธ ุงููุณุงุฑ ูู ุงููุณุชูู ุงูุฃุนูู ุญุชู ุงูุนูุฏุฉ ุงูุญุงููุฉ.
- ูููุง ุฏุฎู ุงููุณุชุฎุฏู ูุณุชูู ุฌุฏูุฏูุง ููุฏูุน ุฅูู ุงูููุฏุณ ูุนูุฏ ุงูุนูุฏุฉ ูุชู ุณุญุจู.
- ูุชู ุชุญููู ุจูุงูุงุช ูู ูุณุชูู ุจุดูู ูุณูู (Lazy Loading) ุนูุฏ ุงูุญุงุฌุฉ ููุท ูุชูููู ุฒูู ุงูุงุณุชุฌุงุจุฉ ูุชูููู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช.

## ุทุฑููุฉ ุงูุชูุนูู
- `NAV_TREE_ENABLED`: ุนูุฏ ุถุจุทูุง ุนูู `1` ูุนูู ุงููุธุงู ุงูุฌุฏูุฏ ุจุงููุงูู.
- `NAV_TREE_SHADOW`: ุนูุฏ ุถุจุทูุง ุนูู `1` ูุนูู ุงููุธุงู ุงูุฌุฏูุฏ ูู ุงูุฎูููุฉ ููุท ูููุงุฑูุฉ ุงููุชุงุฆุฌ ูุน ุงููุธุงู ุงููุฏูู.

```bash
export NAV_TREE_ENABLED=1
export NAV_TREE_SHADOW=0
python -m bot.main
```

## ููููุฉ ุงูุชูููู ุจูู ุงููุณุชููุงุช
- ุชุจุฏุฃ ุงููุงุฌูุฉ ุจูุงุฆูุฉ ุงููุณุชููุงุช `๐`.
- ุงุฎุชูุงุฑ ูุณุชูู ูุฏูุนู ุฅูู ุงูููุฏุณ ููุฌูุจ ุงูุนูุงุตุฑ ุงููุฑุนูุฉ.
- ุฒุฑ **"ุฑุฌูุน"** ูุณุญุจ ุขุฎุฑ ุนูุตุฑ ููุนูุฏ ุงููุณุชุฎุฏู ุฅูู ุงููุณุชูู ุงูุณุงุจู.
- ุนูุฏ ูุฌูุฏ ุนูุงุตุฑ ูุซูุฑุฉ ุชุธูุฑ ุฃุฒุฑุงุฑ **ุงูุชุงูู/ุงูุณุงุจู** ููุชูููู ุจูู ุงูุตูุญุงุช.
- ุจุนุฏ ุงุฎุชูุงุฑ ุงููุณู ูุธูุฑ ุฎูุงุฑ ููุชุฑุฉ ูุญุฏุฏ ุงููุณุงุฑ ุจูู "ุญุณุจ ุงูุณูุฉ" ุฃู "ุญุณุจ ุงููุญุงุถุฑ" ูุจู ุนุฑุถ ุงูุนูุงุตุฑ ุงูููุงุฆูุฉ.

ูุซุงู ููุณุงุฑ ูููุฐุฌู:

```
๐ ุงููุณุชูู ุงูุฃูู โ ๐ ุงูุชุฑู ุงูุฃูู โ ๐ ูุงุฏุฉ ุงูุฑูุงุถูุงุช โ ูุณู ูุธุฑู โ ููุชุฑุฉ ุญุณุจ ุงูุณูุฉ โ 1446
โฉ๏ธ ุฑุฌูุน ูุนูุฏ ุฅูู ูุงุฆูุฉ ุงูููุงุชุฑ ุซู ุฅูู ุงูุฃูุณุงู ูุงููุงุฏุฉ...
```

## ุขููุฉ ุงูุญุฑุงุณุฉ (`can_view`)
- ูุชู ุงุณุชุฏุนุงุก `can_view(user_id, kind, id)` ูุจู ุนุฑุถ ูู ุนูุตุฑ ููุชุฃูุฏ ูู ุณูุงุญ ุงูุตูุงุญูุงุช.
- **ูุณุชุฎุฏู ุจุตูุงุญูุงุช**:
  ```python
  await can_view(1234, "level", 1)  # โ True
  ```
- **ูุณุชุฎุฏู ุจุฏูู ุตูุงุญูุงุช**:
  ```python
  await can_view(9876, "level", 1)  # โ False
  ```

## ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ููุชุญูู ูู ุงูุชุทุงุจู
1. ุดุบูู ุงูุจูุช ุจุงููุถุน ุงูุธูู:
   ```bash
   export NAV_TREE_ENABLED=0
   export NAV_TREE_SHADOW=1
   python -m bot.main
   ```
2. ูููุฐ ูุณุงุฑูุง ุชูููุฏููุง ูุชุงุจุน ุงูุณุฌูุงุช ููุชุฃูุฏ ูู ุชุณุฌูู ุงููุณุงุฑ ููุณู ูู ุงูุดุฌุฑุฉ ุงูุธููุฉ.
3. ูุนูู ุงูุดุฌุฑุฉ ุงูุฌุฏูุฏุฉ (`NAV_TREE_ENABLED=1`) ููุฑุฑ ุงููุณุงุฑ ููุณู ููุชุญูู ูู ุชุทุงุจู ุงููุชุงุฆุฌ.
4. ุงุณุชุฎุฏู ุงูุงุฎุชุจุงุฑ ุงูุขูู ููููุงุฑูุฉ:
   ```bash
   pytest tests/test_navigation_tree.py::test_path_consistency_between_systems -q
   ```

## ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- ุชุธูุฑ ุฃุฒุฑุงุฑ **ุฑุฌูุน** ู **ุงูุชุงูู/ุงูุณุงุจู** ุฃุณูู ูู ุฑุณุงูุฉุ ูุง ูุณููู ุงูุชููู ุนุจุฑ ุงููุณุชููุงุช.
- ูููู ุฅุถุงูุฉ ููุทุฉ ุดุงุดุฉ ูุงุญููุง ูุฅุธูุงุฑ ุงููุณุงุฑ ุงูุชุฑุงููู.
